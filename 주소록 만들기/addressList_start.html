<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>new document</title>
		<link href="css/common.css" type="text/css" rel="stylesheet" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script type="text/javascript">
			const init = function () {
				$("#adressList").data("rowCount", 0); // jQuery에서 데이터 저장하는 방법.(property)

				$("#addBtn").on("click", function (e) {
					e.preventDefault(); // 이중 클릭 방지
					const rowCount = $("#adressList").data("rowCount");
					if (rowCount == 0) {
						$("#adressList tbody tr").remove();
					}
					$("#adressList").data("rowCount", rowCount + 1);
					console.log(rowCount);
					const tr = document.createElement("tr");
					$(tr).append("<td>이창규</td>");
					$(tr).append("<td>010-1234-5678</td>");
					// $(tr).append(
					// 	'<td><a href="#"><img src="images/btn_del.gif" alt="삭제" /></a></td>'
					// );
					const td = $("<td></td>").appendTo(tr);
					const aTagText =
						'<a href="#"><img src="images/btn_del.gif" alt="삭제" /></a>';
					const aTag = $(aTagText).appendTo(td);
					$("#adressList tbody").append(tr);
					$(aTag).on("click", function () {
						$(tr).remove();
						// $(this).parent().parent().remove();
						const rowCount = $("#adressList").data("rowCount");
						const nextRowCount = rowCount - 1;
						$("#adressList").data("rowCount", nextRowCount);
						console.log(nextRowCount);
						if (nextRowCount == 0) {
							$("#adressList tbody").append(
								'<tr><td colspan="3">등록 된 내용이 없습니다.</td></tr>'
							);
						}
					});
				});
			};
			window.onload = init;
		</script>
	</head>
	<body>
		<form name="frm" method="post">
			<label for="mem_name">이름</label>
			<input
				type="text"
				id="userName"
				size="15"
				name="userName"
				maxlength="10" />
			<label for="mem_phone">핸드폰번호</label>
			<input
				type="text"
				id="userPhone"
				size="20"
				maxlength="11"
				name="userPhone" />
			<a href="#" id="addBtn"><img src="images/btn_add.gif" alt="추가" /></a>
		</form>
		<table id="adressList">
			<caption>
				전화번호부
			</caption>
			<colgroup>
				<col width="40%" />
				<col width="40%" />
				<col width="20%" />
			</colgroup>
			<thead>
				<tr>
					<th scope="col">이름</th>
					<th scope="col">전화번호</th>
					<th scope="col">삭제</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td colspan="3">등록 된 내용이 없습니다.</td>
				</tr>
				<!--
				<tr>
					<td>양영보</td>
					<td>010-1111-2222</td>
					<td>
						<a href="#"><img src="images/btn_del.gif" alt="삭제" /></a>
					</td>
				</tr>
			-->
			</tbody>
		</table>
	</body>
</html>
